@page "/home"

@rendermode InteractiveServer
@inject NavigationManager navigationManager
@inject IStringLocalizer<Resource> Localizer

<style>
    .center-form {
        display: flex; /* Enables Flexbox */
        align-items: center; /* Centers content vertically */
        height: 80vh; /* Full viewport height */
    }
</style>


<MudGrid Justify="Justify.Center" Class="center-form"> 
    <MudItem xs="12" sm="10" md="8" lg="6" xxl="6">
        <MudCard Class="pa-5" Elevation="0">
            <MudCardContent>
                <MudText Typo="Typo.h3">
                    @Localizer["ProjectName"]
                </MudText>
                <br>
                <MudText Typo="Typo.body1">
                    @Localizer["Intro"]
                </MudText>
                <br>
                <MudButton 
                OnClick="HandleCreate"
                Variant="Variant.Outlined"
                Color="Color.Primary"
                FullWidth="true">
                    @Localizer["Start"]
                </MudButton>
                <br>
                <br>
                <MudText Typo="Typo.body1">
                    @Localizer["AccountCreatedMessage"]
                </MudText>
                <br>
                <MudTextField T="String"
                @bind-Value="username"
                Label="@Localizer["Username"]"
                Variant="Variant.Outlined"
                Margin="Margin.Dense"
                Required="false"
                RequiredError="@Localizer["RequiredField"]" />
                <br>
                <MudButton OnClick="HandleRedirect"
                Variant="Variant.Outlined"
                Color="Color.Primary"
                FullWidth="true">
                    @Localizer["Redirect"]
                </MudButton>
            </MudCardContent>
        </MudCard>
    </MudItem>
</MudGrid>
@code {
    private string? username { get; set; }
    /// <summary>
    /// Redirects to page with form
    /// </summary>
    public void HandleCreate()
    {
        navigationManager.NavigateTo("/create");
    }
    /// <summary>
    /// Redirect to user page if username is not null
    /// </summary>
    public void HandleRedirect()
    {
        if (username is not null)
        {
            navigationManager.NavigateTo($"/{username}");
        }
    }
}
